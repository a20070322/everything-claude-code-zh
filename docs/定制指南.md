# 定制指南 - 根据项目调整 Everything Claude Code

**目标：** 将 Everything Claude Code 定制为适合你的项目

---

## 目录

- [评估需求](#评估需求)
- [调整 Skills](#调整-skills)
- [定制 Commands](#定制-commands)
- [配置 Agents](#配置-agents)
- [设置 Hooks](#设置-hooks)
- [团队协作](#团队协作)

---

## 评估需求

### 第一步：了解你的项目

在开始定制之前，先回答这些问题：

**项目基本信息：**
- [ ] 项目类型：Web / 移动端 / 桌面 / 后端 / 全栈
- [ ] 技术栈：TypeScript / JavaScript / Go / Python / 其他
- [ ] 框架：React / Vue / Angular / Express / 其他
- [ ] 团队规模：1 人 / 2-5 人 / 5+ 人

**开发需求：**
- [ ] 需要代码审查吗？
- [ ] 需要自动化测试吗？
- [ ] 需要安全检查吗？
- [ ] 需要性能优化吗？

**痛点：**
- [ ] AI 经常忽略编码规范？
- [ ] 代码审查耗时？
- [ ] 测试覆盖不足？
- [ ] 经常出现 Bug？

### 第二步：选择合适的组件

根据你的需求选择组件：

| 需求 | 推荐组件 |
|------|---------|
| 编码规范问题 | `coding-standards` skill |
| 测试覆盖不足 | `tdd-workflow` skill + `/tdd` command |
| 代码审查耗时 | `code-reviewer` agent + `/code-review` command |
| 安全漏洞 | `security-review` skill + `/security-review` command |
| 代码重构需求 | `refactor-cleaner` agent + `/refactor-clean` command |
| 项目规划混乱 | `planner` agent + `/plan` command |

---

## 调整 Skills

### 删除不需要的技能

如果你的项目不使用某些技术，删除相关技能：

```bash
# 不使用 Go 语言
rm -rf ~/.claude/skills/golang-patterns/
rm -rf ~/.claude/skills/golang-testing/

# 不使用 ClickHouse
rm -rf ~/.claude/skills/clickhouse-io/

# 不使用 PostgreSQL
rm -rf ~/.claude/skills/postgres-patterns/
```

### 添加项目特定技能

创建符合你项目需求的技能：

```bash
# 1. 创建技能目录
mkdir -p ~/.claude/skills/project-specific

# 2. 创建技能文件
cat > ~/.claude/skills/project-specific/api-patterns.md << 'EOF'
---
name: api-patterns
description: 项目 API 调用模式和最佳实践
---

# 项目 API 模式

## API 基础 URL
所有 API 调用使用基础 URL：\`\`\`bash
${API_BASE_URL}/v1
\`\`\`

## 认证模式
使用 Bearer Token 认证

## 错误处理
统一的错误处理模式
EOF

# 3. Claude 会自动发现并使用这个技能
```

### 修改现有技能

根据项目规范调整技能：

```bash
# 编辑编码标准技能
vim ~/.claude/skills/coding-standards/SKILL.md

# 添加项目特定的规则
```

**示例修改：**

```markdown
## 项目特定规则

### 命名规范
- 组件使用 PascalCase：`UserProfile.tsx`
- 工具函数使用 camelCase：`formatDate.ts`
- 常量使用 UPPER_SNAKE_CASE：`API_BASE_URL`

### 文件组织
- 每个功能一个文件夹
- 组件和测试在同一目录
- 共享类型放在 `src/types/` 目录

### Git 提交规范
```

---

## 定制 Commands

### 创建项目特定命令

```bash
# 创建项目命令目录
mkdir -p ~/.claude/commands

# 创建部署命令
cat > ~/.claude/commands/deploy.md << 'EOF'
# /deploy - 部署到生产环境

## 部署流程

### 1. 构建项目
\`\`\`bash
npm run build
\`\`\`

### 2. 运行测试
\`\`\`bash
npm test
\`\`\`

### 3. 构建镜像
\`\`\`bash
docker build -t myapp:${version}.
\`\`\`

### 4. 推送到镜像仓库
\`\`\`bash
docker push myapp:${version}.
\`\`\`

### 5. 部署到生产
\`\`\`bash
kubectl set image deployment/myapp myapp:${version}.
\`\`\`

## 验证
- 健康检查：`curl https://api.example.com/health`
- 版本确认：`curl https://api.example.com/version`
EOF
```

### 修改现有命令

根据项目需求修改命令：

```bash
# 编辑代码审查命令
vim ~/.claude/commands/code-review.md

# 添加项目特定的审查要点
```

---

## 配置 Agents

### 禁用不需要的代理

```bash
# 删除不需要的代理
rm ~/.claude/agents/go-reviewer.md
rm ~/.claude/agents/go-build-resolver.md
```

### 创建项目特定代理

```bash
# 创建项目特定的审查代理
cat > ~/.claude/agents/project-reviewer.md << 'EOF'
---
name: project-reviewer
description: 项目特定代码审查专家，熟悉项目架构和规范
tools: ["Read", "Grep", "Glob"]
model: sonnet
---

你是项目代码审查专家，熟悉项目架构和编码规范。

## 审查重点

### 1. 项目架构一致性
- 检查是否遵循项目分层架构
- 验证模块边界是否清晰

### 2. 编码规范
- 检查命名规范
- 验证代码格式
- 确认类型定义完整

### 3. 性能考虑
- 检查是否有性能问题
- 验证缓存策略
- 确认数据库查询优化

### 4. 安全性
- 检查输入验证
- 验证权限控制
- 确认密钥管理

## 项目特定规则

1. **API 调用**
   - 使用统一的 API client
   - 正确处理错误
   - 实现重试逻辑

2. **状态管理**
   - 遵循单向数据流
   - 避免不必要的状态
   - 正确使用 memo

3. **错误处理**
   - 提供用户友好的错误消息
   - 记录错误日志
   - 实现错误边界
EOF
```

---

## 设置 Hooks

### 项目级 Hooks

在项目目录创建 Hooks 配置：

```bash
cd your-project

# 创建项目 Hooks 配置
cat > .claude/hooks/project-hooks.json << 'EOF'
{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "tool == \"Bash\" && tool_input.command matches \"npm run build\"",
        "hooks": [
          {
            "type": "command",
            "command": "echo '[Hook] 构建前运行测试...' && npm test"
          }
        ],
        "description": "构建前自动运行测试"
      }
    ],
    "PostToolUse": [
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(ts|tsx)\\$\"",
        "hooks": [
          {
            "type": "command",
            "command": "npx eslint --fix ${tool_input.file_path}"
          }
        ],
        "description": "自动修复 ESLint 问题"
      }
    ]
  }
}
EOF
```

### 团队共享 Hooks

```bash
# 将 Hooks 配置提交到 Git
git add .claude/hooks/project-hooks.json
git commit -m "feat: add project hooks"

# 团队成员拉取后自动生效
git pull
```

---

## 团队协作

### 统一配置

**方案 1：通过 Git 共享**

```bash
# 1. 将配置添加到项目
git add .claude/

# 2. 提交配置
git commit -m "chore: add team Claude Code configuration"

# 3. 团队成员拉取
git pull
```

**方案 2：通过文档同步**

创建团队配置文档：

```markdown
# 团队 Claude Code 配置指南

## 安装步骤

1. 克隆配置仓库
\`\`\`bash
git clone https://github.com/team/claude-config.git ~/.claude/team-config
\`\`\`

2. 创建符号链接
\`\`\`bash
ln -s ~/.claude/team-config/skills/* ~/.claude/skills/
ln -s ~/.claude/team-config/commands/* ~/.claude/commands/
\`\`\`

## 定期更新

每周同步一次最新配置：
\`\`\`bash
cd ~/.claude/team-config
git pull
\`\`\`
```

### 建立团队规范

**Code Review 流程：**

```
1. 创建功能分支
2. 完成开发
3. 运行 /verify 验证更改
4. 运行 /code-review 审查代码
5. 修复审查发现的问题
6. 再次验证
7. 提交 PR
```

**技能贡献流程：**

```
1. 解决问题
2. 使用 /learn 提取模式
3. 更新技能文件
4. 提交到团队仓库
5. 团队审查
6. 合并到主分支
```

---

## 渐进式采用策略

### 阶段 1：最小化配置（第 1 周）

**目标：** 建立基础配置

**行动：**
- [ ] 安装 Everything Claude Code
- [ ] 配置 3-5 个核心技能
- [ ] 配置 3-5 个常用命令
- [ ] 设置基本的 Hooks

### 阶段 2：扩展配置（第 2-3 周）

**目标：** 扩展功能和自动化

**行动：**
- [ ] 添加所有相关技能
- [ ] 配置所有子代理
- [ ] 设置完整 Hooks
- [ ] 建立团队规范

### 阶段 3：优化定制（第 4 周以上）

**目标：** 深度定制和优化

**行动：**
- [ ] 创建项目特定技能
- [ ] 创建项目特定命令
- [ ] 优化子代理配置
- [ ] 优化 Hooks 性能
- [ ] 建立持续学习流程

---

## 维护和更新

### 定期审查

**每月检查：**
- [ ] 哪些技能最常用？
- [ ] 哪些命令从未使用？
- [ ] 哪些 Hooks 最有价值？
- [ ] 有哪些可以改进？

### 清理未使用的内容

```bash
# 删除未使用的技能
ls ~/.claude/skills/
# 根据使用情况删除

# 删除未使用的命令
ls ~/.claude/commands/
# 根据使用情况删除

# 禁用未使用的 MCP
claude plugin disable <plugin-name>
```

### 同步原项目更新

```bash
# 定期拉取最新版本
cd /path/to/everything-claude-code-zh
git pull origin main

# 检查新增内容
git log HEAD@{1}..HEAD --oneline

# 合并新功能
# 根据需要选择性合并
```

---

## 故障排查

### 问题 1：配置冲突

**症状：** 团队配置和个人配置冲突

**解决方案：**
```bash
# 团队配置优先级更高
# 将团队配置放在 .claude/team-config/
# 个人配置放在 ~/.claude/

# Claude 会自动合并配置
```

### 问题 2：技能不生效

**症状：** Claude 没有使用项目技能

**解决方案：**
```bash
# 检查技能文件
ls -la .claude/skills/

# 检查技能描述是否清晰
cat .claude/skills/your-skill/SKILL.md

# 手动激活
"请使用 your-skill 技能"
```

### 问题 3：命令不起作用

**症状：** 运行命令无反应

**解决方案：**
```bash
# 检查命令文件
ls -la ~/.claude/commands/

# 检查文件格式
head -20 ~/.claude/commands/your-command.md

# 检查权限
chmod +x ~/.claude/commands/your-command.md  # 如果是脚本
```

---

## 成功指标

### 定量指标

- ✅ 技能激活率 > 80%
- ✅ 命令使用频率 > 5 次/天
- ✅ 代码审查通过率 > 95%
- ✅ Bug 修复时间 < 30 分钟

### 定性指标

- ✅ 团队满意度提升
- ✅ 代码质量改善
- ✅ 开发效率提高
- ✅ 知识沉淀完善

---

## 下一步

1. **评估项目需求**
2. **选择合适的组件**
3. **逐步配置和测试**
4. **团队培训**
5. **持续优化**

---

**相关文档：**
- [快速开始](./快速开始.md)
- [组件详解](./组件详解.md)
- [实战案例](./实战案例.md)

---

**最后更新：** 2025-01-30
**难度级别：** ⭐⭐⭐⭐ (专家)
**下一篇：** [常见问题](./常见问题.md)
